In a prior code set (React Native), I created a wrapper context, paperTheme, see below.

When I created tech to help with theming, my primary goal was to manage the notion of color palettes, where I had the nomenclature, for styles s,

s.bg-primary
s.bg-secondary
s.bg-tertiary

s.onPrimary ... was the "color" that looked proper on bg-primary
s.onSecondary ... ditto
s.onTertiary ... ditto

What was nice about this set up that I created for React Native, is that the user could pivot a color palette that would (in turn) pivot the definitions of primary, secondary, and tertiary. And equally important, there were both day and night versions of the same.

Obviously, managing color palettes and their day/night versions is tricky, but I got it to work efficiently.

First, let me pass along the tech details below to be followed with more tech details.


function App(): React.ReactNode {
  return (
    <ErrorBoundary FallbackComponent={ErrorFallback}>
      <Provider store={store}>
        <PaperProvider>
          <TourGuideProvider
            // wrapperStyle={{ backgroundColor: 'green' }}
            backdropColor={'rgba(0,0,0,0.4)'}
            tooltipComponent={CustomTooltip}
            // tooltipComponent={CustomTooltip}
            // preventOutsideInteraction={true}
            // dismissOnPress={true} ... Not to be combined with preventOutsideInteraction.
          >
            <ThemeProvider>
              <LoadingProvider>
                {/* <SubscriptionProvider> */}
                <AnimationProvider>
                  <MainScreen />
                </AnimationProvider>
                {/* </SubscriptionProvider> */}
              </LoadingProvider>
            </ThemeProvider>
          </TourGuideProvider>
        </PaperProvider>
      </Provider>
    </ErrorBoundary>
  )
}

export default App

-------------------------

where,

import { createContext, type ReactNode, useContext, useState } from 'react'
import useLocalStore from '@cknHook/useLocalStore'
import { type Styles, getPaperTheme, type PaperTheme, type ExtendedStyles } from '@cknTypes/styles'
import { getRandomInteger } from '@components/Util'
import { brands } from '@cknTypes/brand'
import {
  defaultColorScheme,
  defaultColorPalette
} from '@cknTypes/defaults'
import {
  ColorPalette,
  ColorScheme,
  SetColor,
  SetColorProps
} from '@cknTypes/types'
// import { styles } from 'react-native-style-tachyons'

export type ThemeContextType = {
  colorScheme: ColorScheme
  colorPalette: ColorPalette
  setColor: SetColor
  styles: Styles
  extendedStyles: ExtendedStyles
  paperTheme: PaperTheme
  isDay: boolean
  key: number
}

const {
  styles: defaultStyles,
  extendedStyles: defaultExtendedStyles,
  paperTheme: defaultPaperTheme
} = getPaperTheme(defaultColorScheme as ColorScheme, defaultColorPalette as ColorPalette)

export { defaultStyles, defaultExtendedStyles, defaultPaperTheme }

const defaultKey = getRandomInteger({ min: 1, max: 10000000 })

export const ThemeContext = createContext<ThemeContextType>({
  colorScheme: ColorScheme.LIGHT,
  colorPalette: ColorPalette.MIDNIGHT_SAND,
  // eslint-disable-next-line @cknTypescript-eslint/no-unused-vars
  setColor: async (props: SetColorProps) => {},
  styles: defaultStyles,
  extendedStyles: defaultExtendedStyles,
  paperTheme: defaultPaperTheme,
  isDay: true,
  key: defaultKey
})

type ThemeProviderProps = {
  children: ReactNode
}

type UpdateThemeProps = {
  colorScheme: ColorScheme
  colorPalette: ColorPalette
}

export const ThemeProvider = ({ children }: ThemeProviderProps): JSX.Element => {
  const { setUserData } = useLocalStore()

  const updateTheme = ({ colorScheme, colorPalette }: UpdateThemeProps): void => {
    const { styles, extendedStyles, paperTheme } = getPaperTheme(colorScheme, colorPalette)

    setTheme({
      colorScheme,
      colorPalette,
      setColor: handleSetColor,
      styles,
      extendedStyles,
      paperTheme,
      isDay: colorScheme === ColorScheme.LIGHT, /* logic to determine isDay based on userPreferences or default */
      key: getRandomInteger({ min: 1, max: 10000000 })
    })
  }

  const handleSetColor: SetColor = async ({ colorScheme, colorPalette }: SetColorProps): Promise<void> => {
    updateTheme({ colorScheme, colorPalette })
    // Xonsole.log(`Setting to local storage: ${colorPalette}`)
    // I do not store a brand colorPalette to
    // local storage.
    if (!brands.includes(colorPalette)) {
      await setUserData({ colorScheme, colorPalette })
    } else {
      await setUserData({ colorScheme })
    }
  }

  const [theme, setTheme] = useState<ThemeContextType>({
    colorScheme: defaultColorScheme as ColorScheme,
    colorPalette: defaultColorPalette as ColorPalette,
    setColor: handleSetColor,
    styles: defaultStyles,
    extendedStyles: defaultExtendedStyles,
    paperTheme: defaultPaperTheme,
    isDay: defaultColorScheme as ColorScheme === ColorScheme.LIGHT,
    key: defaultKey
  })

  return (
    <ThemeContext.Provider value={{
      colorScheme: theme.colorScheme,
      colorPalette: theme.colorPalette,
      setColor: handleSetColor,
      styles: theme.styles,
      extendedStyles: theme.extendedStyles,
      paperTheme: theme.paperTheme,
      isDay: theme.colorScheme === ColorScheme.LIGHT,
      key: theme.key
    }}>
      {children}
    </ThemeContext.Provider>
  )
}

// Custom hook to use the context
export const useThemeContext = (): ThemeContextType => {
  const context = useContext(ThemeContext)
  if (context == null) {
    throw new Error('useThemeContext must be used within an ThemeProvider')
  }
  return context
}

ThemeContext.displayName = 'ThemeContext'

--------------------------

and,

import { Dimensions, StyleSheet, type TextStyle, type ViewStyle, type ImageStyle, type ColorValue } from 'react-native'

import NativeTachyons, { styles as tachyonsStyles } from 'react-native-style-tachyons'
import { type GenericPaperTheme } from '@cknHook/useColors/useColors'
import type { MD3ElevationColors } from 'react-native-paper/lib/typescript/types'
// import { useColors } from '@cknHook/useColors/useColors'
import { ColorPalette, ColorScheme, basicColors } from '@cknTypes/types'
import { getColorsForPaletteDay, getColorsForPaletteNight } from '@cknHook/useColors/utils'

export type ColorsType = Record<string, string | MD3ElevationColors | ColorValue>

export type ExtendedStyles = {
  rowContainer: ViewStyle
  messageContainer: ViewStyle
  inputContainer: ViewStyle
  centerAlignContainer100: ViewStyle
  centerAlignContainer80: ViewStyle
  buttonContainer: ViewStyle
  button: ViewStyle
  buttonWarning: ViewStyle
  buttonReverse: ViewStyle
  buttonMuted: ViewStyle
  warningContainer: ViewStyle
  containerSwitch: ViewStyle

  title: TextStyle
  subTitle: TextStyle
  message: TextStyle
  input: TextStyle
  buttonText: TextStyle
  buttonTextWarning: TextStyle
  buttonTextReverse: TextStyle
  buttonTextMuted: TextStyle
  h2: TextStyle
  h3: TextStyle
  h4: TextStyle
  onWarningText: TextStyle
  f_a: TextStyle
  f_smooth: TextStyle
  marker: TextStyle
  markerReverse: TextStyle
  buttonSwitch: TextStyle

  iconZ: ImageStyle
}

// export type ExtendedStyles = Style
export type Styles = Record<string, ViewStyle | TextStyle | ImageStyle>
export type PaperTheme = GenericPaperTheme<number, ColorsType>
export const getPaperTheme = (
  colorScheme: ColorScheme,
  colorPalette: ColorPalette
): {
  paperTheme: PaperTheme
  extendedStyles: ExtendedStyles // Style
  styles: Styles
  isDay: boolean
} => {
  const screenWidth = Dimensions.get('screen').width

  const colorMuted = 'silver'
  const colorWarning = 'red'
  const colorOnWarning = 'white'

  // const { selectColorsNight, selectColorsDay } = useColors()
  const selectColorsNight = getColorsForPaletteNight(colorPalette)
  const selectColorsDay = getColorsForPaletteDay(colorPalette)

  const paperTheme: PaperTheme = {
    roundness: 20,
    // colors: colorScheme === ColorScheme.LIGHT ? selectColorsDay(colorPalette) : selectColorsNight(colorPalette)
    colors: colorScheme === ColorScheme.LIGHT ? selectColorsDay : selectColorsNight
  }

  const dataFontSize = 1 // 12 // 0.1 // 12
  const dataColor = paperTheme.colors.transparent // paperTheme.colors.primary // paperTheme.colors.secondary // paperTheme.colors.transparent
  const dataColorReverse = paperTheme.colors.onPrimary // paperTheme.colors.transparent // paperTheme.colors.onPrimary // paperTheme.colors.onPrimary // paperTheme.colors.transparent

  const extendedStyles = StyleSheet.create<ExtendedStyles>({
    buttonContainer: {
      justifyContent: 'center',
      alignItems: 'center',
      width: '100%'
    },
    button: {
      backgroundColor: paperTheme.colors.primary as ColorValue,
      // alignItems:  'center',
      // justifyContent: 'center',
      borderRadius: 20
    },
    buttonWarning: {
      backgroundColor: paperTheme.colors.primary as ColorValue,
      alignItems: 'center',
      justifyContent: 'center',
      borderRadius: 20
    },
    buttonText: {
      paddingVertical: 10,
      paddingHorizontal: 20,
      fontSize: 32,
      fontWeight: 'bold',
      color: paperTheme.colors.onPrimary as ColorValue
    },
    buttonTextWarning: {
      paddingVertical: 10,
      paddingHorizontal: 20,
      fontSize: 32,
      fontWeight: 'bold',
      color: paperTheme.colors.onPrimary as ColorValue
    },
    buttonReverse: {
      backgroundColor: paperTheme.colors.background as ColorValue,
      alignItems: 'center',
      justifyContent: 'center',
      borderRadius: 20,
      borderWidth: 1,
      borderColor: paperTheme.colors.primary as ColorValue
    },
    buttonMuted: {
      backgroundColor: paperTheme.colors.background as ColorValue,
      alignItems: 'center',
      justifyContent: 'center',
      borderRadius: 20,
      borderWidth: 1,
      borderColor: colorMuted
    },
    buttonTextReverse: {
      paddingVertical: 10,
      paddingHorizontal: 20,
      fontSize: 32,
      fontWeight: 'bold',
      color: paperTheme.colors.primary as ColorValue
    },
    buttonTextMuted: {
      paddingVertical: 10,
      paddingHorizontal: 20,
      fontSize: 32,
      fontWeight: 'bold',
      color: colorMuted
    },
    h2: {
      marginBottom: 20,
      fontSize: 32,
      fontWeight: 'bold',
      color: paperTheme.colors.primary as ColorValue
    },
    h3: {
      marginBottom: 16,
      fontSize: 28,
      fontWeight: 'bold',
      color: paperTheme.colors.primary as ColorValue
    },
    h4: {
      marginBottom: 16,
      fontSize: 20,
      fontWeight: 'bold',
      color: paperTheme.colors.primary as ColorValue
    },
    messageContainer: {
      // marginTop: 20,
      width: '80%'
    },
    message: {
      fontSize: 28,
      fontWeight: 'bold',
      color: paperTheme.colors.primary as ColorValue,
      textAlign: 'center'
    },
    inputContainer: {
      width: '100%',
      justifyContent: 'center',
      alignItems: 'center'
    },
    centerAlignContainer100: {
      width: '100%'
      // justifyContent: 'center',
      // alignItems: 'center',
    },
    centerAlignContainer80: {
      width: '80%'
      // justifyContent: 'center',
      // alignItems: 'center',
    },
    input: {
      marginTop: 10,
      width: '80%'
    },
    rowContainer: {
      flexDirection: 'row',
      width: '80%'
    },
    subTitle: {
      textAlign: 'center',
      fontWeight: 'bold',
      fontSize: 28,
      marginVertical: 10
    },
    title: {
      textAlign: 'center',
      fontWeight: 'bold',
      fontSize: 40,
      marginVertical: 10
    },
    warningContainer: {
      backgroundColor: colorWarning
    },
    onWarningText: {
      color: colorOnWarning
    },
    iconZ: {
      width: 10,
      height: 10
    },
    f_a: {
      fontSize: 80
    },
    f_smooth: {
      fontFamily: 'comic sans ms'
    },
    marker: {
      fontSize: dataFontSize,
      textAlign: 'center',
      color: dataColor as ColorValue
    },
    markerReverse: {
      fontSize: dataFontSize,
      textAlign: 'center',
      color: dataColorReverse as ColorValue
    },
    containerSwitch: {
      // textAlign: 'center',
      backgroundColor: paperTheme.colors.primary as ColorValue
    },
    buttonSwitch: {
      fontSize: dataFontSize,
      color: dataColor as ColorValue
    }
  })

  NativeTachyons.build(
    {
      /* REM parameter is optional, default is 16 */
      rem: screenWidth > 340 ? 18 : 16,
      /* fontRem parameter is optional to allow adjustment in font-scaling. default falls back to rem */
      fontRem: 20,

      // fonts: {
      //   iowan: 'Iowan Old Style'
      // },

      colors: {
        palette: {
          ...basicColors,

          primary: paperTheme.colors.primary,
          onPrimary: paperTheme.colors.onPrimary,
          secondary: paperTheme.colors.secondary,
          onSecondary: paperTheme.colors.onSecondary,
          tertiary: paperTheme.colors.tertiary,
          onTertiary: paperTheme.colors.onTertiary,
          background: paperTheme.colors.background,
          onBackground: paperTheme.colors.onBackground,
          transparent: 'transparent'
        }
      },

      customStyles: {
        f1: { fontSize: 56 },
        // f1: { fontsize: 3 },
        // f2: { fontsize: 2.25 },
        // f3: { fontsize: 1.5 },
        // f4: { fontsize: 1.25 },
        // f5: { fontsize: 1 },
        // f6: { fontsize: 0.875 },
        f7: { fontSize: 14 },
        f8: { fontSize: 12 },

        bw0: { borderWidth: 0 },
        bw1: { borderWidth: 0.125 },
        bw2: { borderWidth: 0.25 },
        bw3: { borderWidth: 0.5 },
        bw4: { borderWidth: 1 },
        bw5: { borderWidth: 2 },
        bw6: { borderWidth: 4 },
        bw7: { borderWidth: 8 },

        bb: { borderTopWidth: 0, borderLeftWidth: 0, borderRightWidth: 0 },
        bt: { borderBottomWidth: 0, borderLeftWidth: 0, borderRightWidth: 0 },
        bl: { borderRightWidth: 0, borderTopWidth: 0, borderBottomWidth: 0 },
        br: { borderLeftWidth: 0, borderTopWidth: 0, borderBottomWidth: 0 },
        bv: { borderLeftWidth: 0, borderRightWidth: 0 },
        bh: { borderTopWidth: 0, borderBottomWidth: 0 },

        w_05: { width: '05%' },
        w_10: { width: '10%' },
        w_20: { width: '20%' },
        w_25: { width: '25%' },
        w_30: { width: '30%' },
        w_40: { width: '40%' },
        w_50: { width: '50%' },
        w_60: { width: '60%' },
        w_70: { width: '70%' },
        w_80: { width: '80%' },
        w_90: { width: '90%' },
        w_100: { width: '100%' },

        h_05: { height: '05%' },
        h_10: { height: '10%' },
        h_20: { height: '20%' },
        h_30: { height: '30%' },
        h_40: { height: '40%' },
        h_50: { height: '50%' },
        h_60: { height: '60%' },
        h_70: { height: '70%' },
        h_80: { height: '80%' },
        h_90: { height: '90%' },
        h_100: { height: '100%' },

        // mw_10: { maxWidth: '10%' },
        // mw_20: { maxWidth: '20%' },
        // mw_30: { maxWidth: '30%' },
        // mw_40: { maxWidth: '40%' },
        // mw_50: { maxWidth: '50%' },
        // mw_60: { maxWidth: '60%' },
        // mw_70: { maxWidth: '70%' },
        mw_80: { maxWidth: '80%' },
        // mw_90: { maxWidth: '90%' },
        mw_100: { maxWidth: '100%' },

        flx_01: { flex: 0.1 },
        flx_02: { flex: 0.2 },
        flx_03: { flex: 0.3 },
        flx_04: { flex: 0.4 },
        flx_05: { flex: 0.5 },
        flx_06: { flex: 0.6 },
        flx_07: { flex: 0.7 },
        flx_08: { flex: 0.8 },
        flx_09: { flex: 0.9 },
        flx_1: { flex: 1 },
        flx_125: { flex: 1.25 },
        flx_15: { flex: 1.5 },
        flx_2: { flex: 2 },
        flx_22: { flex: 2.2 },
        flx_25: { flex: 2.5 },
        flx_3: { flex: 3 },
        flx_4: { flex: 4 },
        flx_5: { flex: 5 },
        flx_6: { flex: 6 },
        flx_7: { flex: 7 },
        flx_8: { flex: 8 },

        w100: { width: '100%' },
        // w80: { width: '80%' },
        // w60: { width: '60%' },
        // w40: { width: '40%' },
        // w20: { width: '20%' },

        ar: { aspectRatio: 1 },

        o_0: { opacity: 0.0 },

        jcfs: { justifyContent: 'flex-start' },
        jcfe: { justifyContent: 'flex-end' },

        w_sw: { width: screenWidth },
        // h_sh: { height: screenHeight },

        hidden: { overflow: 'hidden' },

        z_max: { zIndex: 99999999 },

        br6: { borderRadius: 40 },
        br7: { borderRadius: 60 },
        br8: { borderRadius: 60 },

        ff_iowan: { fontFamily: 'Iowan Old Style' },
        ff_roboto: { fontFamily: 'Roboto' }
      }
    },
    StyleSheet
  )

  const styles = tachyonsStyles as Styles

  return {
    paperTheme,
    extendedStyles,
    styles,
    isDay: colorScheme === ColorScheme.LIGHT
  }
}


